<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{/admin/layout/layout :: content(~{::body},~{::title})}">

<head>

<title>Danh sách sản phẩm</title>
</head>
<body>
	<!-- Page Content-->
	<div class="page-content" ng-controller="sanphamAdmin-controller">
		<div class="container-fluid">
			<!-- Page-Title -->
			<div class="row">
				<div class="col-sm-12">
					<div class="page-title-box">
						<div class="row">
							<div class="col">
								<h4 class="page-title">Danh Sách Nhập Hàng</h4>
							</div>
							<!--end col-->
							<div class="col-auto align-self-center">
								<a href="#" class="btn btn-sm btn-outline-primary"
									id="Dash_Date"> <span class="day-name" id="Day_Name">Today:</span>&nbsp;
									<span class="" id="Select_date">Jan 11</span> <i
									data-feather="calendar" class="align-self-center icon-xs ms-1"></i>
								</a> <a href="#" class="btn btn-sm btn-outline-primary"> <i
									data-feather="download" class="align-self-center icon-xs"></i>
								</a> <a th:href="@{/admin/addCoupon}"
									class="btn btn-sm btn-outline-primary" data-toggle="tooltip"
									title="Tạo phiếu nhập mới"> <i class="mdi mdi-plus"></i>
								</a>
							</div>
							<!--end col-->
						</div>
						<!--end row-->
					</div>
					<!--end page-title-box-->
				</div>
				<!--end col-->
			</div>
			<!--end row-->
			<!-- end page title end breadcrumb -->
			<div class="row">
				<div class="col-12">
					<div class="card">

						<!--end card-header-->
						<div class="card-body">
							<table class="table mb-0 table-centered">
								<thead>
									<tr>
										<th>Mã Phiếu Nhập</th>
										<th>Nhà Cung Cấp</th>
										<th>Người Tạo</th>
										<th>Ngày Nhập</th>
										<th>Tổng Tiền</th>
										<th>Trạng Thái</th>
										<th>Ghi Chú</th>
										<th>Xác Nhận</th>
										<th></th>
									</tr>
								</thead>


								<tbody>
									<tr ng-repeat="item in phieuhang">
										<td>{{item.maPhieuNhap}}</td>
										<td>{{item.nhaCungCap.tenNhaCungCap}}</td>
										<td>{{item.taiKhoanAdmin.hoTen}}</td>
										<td>{{item.ngayNhap}}</td>
										<td>{{item.tongTien | number}} đ</td>
										<td><span class="badge bg-success"
											ng-if="item.trangThai == 2">Đã nhận hàng</span> <span
											class="badge bg-danger" ng-if="item.trangThai == 1">Chưa
												nhận hàng</span> <span class="badge bg-warning"
											ng-if="item.trangThai == 3">Đã Hủy</span></td>
										<td>{{item.ghiChu}}</td>
										<td><span ng-if="item.trangThai == true">
												<button type="button" title="Xác Nhận Đã Nhận Hàng"
													data-tippy-arrow="true" data-tippy-arrowType="round"
													data-tippy-animation="fade"
													class="btn btn-success btn-icon-circle btn-icon-circle-sm btn-sm"
													ng-click="capNhatTrangThaiPN(item)">
													<i class="fas fa-check"></i>
												</button>
										</span></td>
										<td class="text-right">
											<div class="dropdown d-inline-block">
												<a class="dropdown-toggle arrow-none" id="dLabel11"
													data-bs-toggle="dropdown" href="#" role="button"
													aria-haspopup="false" aria-expanded="false"> <i
													class="las la-ellipsis-v font-20 text-muted"></i>
												</a>
												<div class="dropdown-menu dropdown-menu-right"
													aria-labelledby="dLabel11">
													<a class="dropdown-item"
														ng-click="goTodetailCoupon(item.maPhieuNhap)">Chi tiết
														phiếu nhập</a> <a data-bs-toggle="modal"
														data-bs-target="#lydohuy" ng-if="item.trangThai == 1"
														class="dropdown-item" ng-click="layma(item)">Hủy phiếu nhập</a>

												</div>
											</div>
										</td>
										<!-- Model lý do hủy -->

										<div class="modal fade bd-example-modal-lg" id="lydohuy"
											tabindex="-1" role="dialog"
											aria-labelledby="myLargeModalLabel" aria-hidden="true">
											<div class="modal-dialog modal-lg" role="document">
												<div class="modal-content">
													<div class="modal-header">
														<h6 class="modal-title m-0" id="myLargeModalLabel">Vui
															Lòng Nhập Lý Do Hủy Đơn Hàng</h6>
														<button type="button" class="btn-close"
															data-bs-dismiss="modal" aria-label="Close"></button>
													</div>
													<!--end modal-header-->
													<div class="modal-body">
														<div class="row">
															<div class="col-lg-4 text-center">
																<img
																	src="https://firebasestorage.googleapis.com/v0/b/formal-facet-395516.appspot.com/o/logomoi.png?alt=media&token=801711dc-776f-4e39-9750-d6f3983a57c1"
																	alt="" class="img-fluid">
															</div>
															<!--end col-->
															<div class="col-lg-8 align-self-center">
																<div class="card">
																	<div class="card-body">
																		<div class="form-floating">
																			<textarea class="form-control"
																				placeholder="Leave a comment here"
																				id="floatingTextarea2" style="height: 100px"
																				ng-model="ghichu"></textarea>
																			<label for="floatingTextarea2">Lý do hủy đơn
																				hàng</label>
																		</div>
																	</div>
																</div>
															</div>
															<!--end col-->
														</div>
														<!--end row-->
														<div class="row">
															<div class="col-md-11"></div>
															<div class="col-md-1">


																<button type="button" title="Gửi"
																	class="btn btn-success btn-icon-circle btn-icon-circle-lg btn-lg"
																	ng-click="capNhatTrangThaiPN2(item)">
																	<i class="typcn typcn-location-arrow-outline"></i>
																</button>
															</div>
														</div>
													</div>
													<!--end modal-body-->
													<div class="modal-footer">
														<button type="button"
															class="btn btn-soft-secondary btn-sm"
															data-bs-dismiss="modal">Close</button>
													</div>
													<!--end modal-footer-->
												</div>
												<!--end modal-content-->
											</div>
											<!--end modal-dialog-->
										</div>
										<!--end modal-->
									</tr>

								</tbody>
							</table>


						</div>
					</div>
				</div>
				<!-- end col -->
			</div>
			<!-- end row -->


		</div>
		<!-- container -->

		<footer class="footer text-center text-sm-start">
			&copy;
			<script>
				document.write(new Date().getFullYear())
			</script>
			Dastone <span class="text-muted d-none d-sm-inline-block float-end">Crafted
				with <i class="mdi mdi-heart text-danger"></i> by Mannatthemes
			</span>
		</footer>
		<!--end footer-->
	</div>
	<!-- end page content -->
	</div>
	<!-- end page-wrapper -->

</body>

</html>